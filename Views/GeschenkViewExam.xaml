<Window x:Class="SchedlbergerEkaterina_WPF_.Views.GeschenkViewExam"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SchedlbergerEkaterina_WPF_.Views"
      
        xmlns:conv="clr-namespace:SchedlbergerEkaterina_WPF_.Converters"
        mc:Ignorable="d"

        Title="🎁 Geschenke-Zentrale"
        Height="770"
        Width="1100"
        Background="#FFF3F4F6"
        FontSize="14"
        FontFamily="Segoe UI">

    <Window.Resources>
        <conv:IndexToNumberConverter x:Key="IndexToNumberConverter"/>
        <conv:EditModeToTextConverter x:Key="EditModeToTextConverter"/>
    </Window.Resources>
    <DockPanel>

        <!-- Menüleiste -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Datei">
                <MenuItem Header="🏠 Startseite" Click="Startseite_Click"/>
                <MenuItem Header="📂 Neue Geschenke-Zentrale" Command="{Binding NewListCommand}"/>
                <Separator/>
                <MenuItem Header="ⓘ Informationen" Click="Info_Click"/>
                <MenuItem Header="✖ Beenden" Click="Close_Click"/>
            </MenuItem>

            <MenuItem Header="Bearbeiten">
                <MenuItem Header="_Neu" Click="AddGeschenkDialog_Click"/>
                <MenuItem Header="_Ändern" Command="{Binding EditCommand}"/>
                <MenuItem Header="_Ausschneiden" Command="{Binding DeleteCommand}"/> 
                <MenuItem Header="_Kopieren" Command="{Binding CopyCommand}"/>
                <MenuItem Header="_Löschen" Command="{Binding DeleteCommand}"/>
            </MenuItem>



        </Menu>

        <!-- Symbolleiste -->
        <ToolBar DockPanel.Dock="Top">
            <Button Content="➕ Neu" Click="AddGeschenkDialog_Click"/>
            <Button Content="📄 Kopieren" Command="{Binding CopyCommand}"/>
            <Button Content="🗑️ Löschen" Command="{Binding DeleteCommand}"/>
            <Button Content="✖ Beenden" Click="Close_Click"/>
        </ToolBar>

        <!-- Statusbar -->
        <StatusBar DockPanel.Dock="Bottom" 
                            Background="#FFF0F2F1">
            <StatusBarItem>
                <TextBlock Text="{Binding AnzahlGeschenke}"
                                       Margin="10,0,0,10"
                                       FontWeight="SemiBold"
                                       FontSize="14"
                                       Foreground="Salmon"/>
            </StatusBarItem>
            <!-- Trenner -->
            <Separator Margin="10,6"/>
            <StatusBarItem>
                <TextBlock Text="{Binding UserMessage}"
                                         Margin="0,0,0,10"
                                         FontWeight="SemiBold"
                                         FontSize="14"
                                         Foreground="ForestGreen"/>
            </StatusBarItem>
        </StatusBar>


        <!-- LINKS -->
        <Border DockPanel.Dock="Left"
                            Width="300"
                            Margin="12"
                            Padding="8"
                            Background="White"
                            CornerRadius="10"
                            BorderBrush="#FFE5E7EB"
                            BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Überschrift -->
                <TextBlock Grid.Row="0"
                                Text="Mein Wunschzettel:"
                                FontSize="15"
                                FontWeight="SemiBold"
                                Foreground="Salmon"
                                Margin="0,10,0,10"/>


                <!-- Liste
                    ItemsSource
                    → Liste aller Geschenke, die angezeigt werden

                    SelectedItem
                    → das aktuell ausgewählte Geschenk in der Liste-->
                <ListBox Grid.Row="1"
                                    ItemsSource="{Binding MeineGeschenkeFiltered}"
                                    SelectedItem="{Binding AusgewGeschenk}"
                                    BorderThickness="0"
                                    HorizontalContentAlignment="Stretch"
                                    AlternationCount="1000">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="8"
                                               HorizontalAlignment="Stretch">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40" />
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Nummer -->
                                    <TextBlock Grid.Column="0"
                                                        Text="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem},
                                                        Path=(ItemsControl.AlternationIndex),
                                                        Converter={StaticResource IndexToNumberConverter}}"
                                                        FontWeight="Bold"
                                                        Foreground="ForestGreen"/>

                                    <!-- Inhalt -->
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding Name}"
                                                                    FontWeight="Bold"
                                                                    Foreground="ForestGreen"/>

                                        <TextBlock Text="{Binding Prioritaet}"
                                                                    FontStyle="Italic"
                                                                    Foreground="Gray"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <!-- Suche UNTEN -->
                <StackPanel Grid.Row="2" Margin="5">
                    <!-- Buttons für Filter -->
                    <StackPanel Margin="0,0,0,8">
                        <Button Content="⭐ Super wichtige" 
                                Click="SucheSuperWichtige_Click"
                               
                                Margin="0,0,0,5"
                                Style="{StaticResource PrimaryButtonStyle}"/>
                        <Button Content="📋 Alle" 
                                Click="ZeigeAlle_Click"
                              
                                Margin="0,0,0,0"
                                Style="{StaticResource DefaultButtonStyle}"/>
                    </StackPanel>
                    
                    <TextBlock  
                                            Text="Suchen:" FontWeight="SemiBold">
                    </TextBlock>
                    <TextBox Text="{Binding Suchtext, UpdateSourceTrigger=PropertyChanged}"
                                                 Height="28" Margin="0,4,0,4">
                        <TextBox.ToolTip>
                            <TextBlock Foreground="Gray">
                                                         🔍 Suche nach Geschenken
                            </TextBlock>
                        </TextBox.ToolTip>
                    </TextBox>
                </StackPanel>

            </Grid>
        </Border>
        <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
        <!-- RECHTS -->
        <Border Margin="12"
                        Padding="18"
                        Background="White"
                        CornerRadius="10"
                        BorderBrush="#FFE5E7EB"
                        BorderThickness="1">
            <ScrollViewer VerticalScrollBarVisibility="Auto">

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Ausgewähltes Geschenk-->
                    <GroupBox Grid.Row="0"
                                                Header="Ausgewähltes Geschenk: "
                                                Margin="0,0,10,5"
                                                Padding="8"
                                                Background="White"
                                                BorderBrush="#BBDEFB"
                                                BorderThickness="1"
                                                Foreground="#1565C0"
                                                FontSize="15"
                                                FontWeight="SemiBold">

                        <Grid Margin="10,0,10,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <!-- für Bild + Buttons -->
                            </Grid.RowDefinitions>

                            <!-- Name -->
                            <TextBlock Grid.Row="0"
                                                         Text="{Binding AusgewGeschenk.Name}"
                                                         FontSize="18"
                                                         FontWeight="Bold"
                                                         Margin="0,0,0,4"/>

                            <!-- ID -->
                            <TextBlock Grid.Row="1"
                                                         Text="{Binding AusgewGeschenk.GeschenkId, StringFormat=ID: {0}}"
                                                         FontSize="12"
                                                         Foreground="Gray"
                                                         Margin="0,4,0,4"/>

                            <!-- Datum -->
                            <TextBlock Grid.Row="2"
                                                         Text="{Binding AusgewGeschenk.Erstellungsdatum, StringFormat=Erstellt am: {0:dd.MM.yyyy HH:mm}}"
                                                         FontSize="12"
                                                         Foreground="Gray"
                                                         Margin="0,0,0,4"/>

                            <!-- IstWichtig -->
                            <TextBlock Grid.Row="3"
                                                         Text="{Binding AusgewGeschenk.IstWichtig, StringFormat=Ist wichtig: {0}}"
                                                         FontSize="12"
                                                         Foreground="Gray"
                                                         Margin="0,0,0,4"/>

                            <!-- Preis -->
                            <TextBlock Grid.Row="4"
                                                         Text="{Binding AusgewGeschenk.Preis, StringFormat=Preis: {0:F2} €}"
                                                         FontSize="12"
                                                         Foreground="Gray"
                                                         Margin="0,0,0,4"/>

                            <!-- Bild + Buttons nebeneinander -->
                            <Grid Grid.Row="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <!-- BUTTONS LINKS -->
                                <StackPanel Grid.Column="0"
                                                VerticalAlignment="Center" HorizontalAlignment="Left">
                                    <Button Content="📄 Kopieren"
                                                   Command="{Binding CopyCommand}"
                                                     Style="{StaticResource SecondaryButtonStyle}"/>

                                    <Button Content="✏️ Bearbeiten"
                                                    Command="{Binding EditCommand}"
                                                     Style="{StaticResource SecondaryButtonStyle}"/>

                                    <Button Content="🗑️ Löschen"
                                                   Command="{Binding DeleteCommand}"
                                                     Style="{StaticResource DangerButtonStyle}"/>
                                </StackPanel>

                                <!-- BILD RECHTS -->
                                <Image Grid.Column="1"
                                                 Source="{Binding AusgewGeschenk.Bild}"
                                                 Height="230"
                                                 Stretch="Uniform"
                                                 HorizontalAlignment="Left"/>
                            </Grid>
                        </Grid>
                    </GroupBox>

                    <!-- Neues Geschenk-->
                    <GroupBox Grid.Row="1"
                                          Header="Neues Geschenk: "
                                          Margin="0,10,10,0"
                                          Padding="8"
                                          Background="White"
                                          BorderBrush="#C8E6C9"
                                          BorderThickness="1"
                                          Foreground="#2E7D32"
                                          FontSize="15"
                                          FontWeight="SemiBold"
                                         >

                        <StackPanel Margin="10,5,10,0" >
                            <!-- Name -->
                            <TextBlock Text="Was kommt auf den Wunschzettel?"
                                                       Foreground="ForestGreen"/>
                            <TextBox Text="{Binding NeuerName}"
                                                     Margin="0,6,0,12"
                                                     Height="40"
                                                     Padding="8"
                                                     Foreground="DarkSlateGray"
                                                     BorderBrush="#FFD1D5DB"
                                                     BorderThickness="1"
                                                     Background="#FFFAFAFA"/>

                            <!-- Priorität -->
                            <TextBlock Text="Wie wichtig ist das?"
                                                       Foreground="ForestGreen"/>
                            <ComboBox SelectedValue="{Binding NeuePrioritaet}"
                                                      SelectedValuePath="Content"
                                                      Height="40"
                                                      Padding="8"
                                                      Foreground="DarkSlateGray"
                                                      Margin="0,6,0,14"
                                                      BorderBrush="#FFD1D5DB"
                                                      Background="#FFFAFAFA">
                                <ComboBoxItem Content="weniger wichtig"/>
                                <ComboBoxItem Content="wichtig"/>
                                <ComboBoxItem Content="super wichtig"/>
                            </ComboBox>

                            <!-- IstWichtig -->
                            <CheckBox Content="Ist wichtig"
                                                  IsChecked="{Binding IstWichtig}"
                                                  Foreground="ForestGreen"
                                                  Margin="0,6,0,12"
                                                  FontWeight="SemiBold"/>

                            <!-- Preis -->
                            <TextBlock Text="Preis (€)"
                                                       Foreground="ForestGreen"/>
                            <TextBox Text="{Binding Preis, StringFormat=F2}"
                                                     Margin="0,6,0,12"
                                                     Height="40"
                                                     Padding="8"
                                                     Foreground="DarkSlateGray"
                                                     BorderBrush="#FFD1D5DB"
                                                     BorderThickness="1"
                                                     Background="#FFFAFAFA"/>

                            <!-- Bild -->
                            <TextBlock Text="Bild dazu?"
                                                    FontWeight="SemiBold"
                                                    Foreground="ForestGreen"
                                                    Margin="0,6,0,0"/>

                            <!-- Buttons: Bild hinzufügen + Auf den Wunschzettel -->
                            <WrapPanel Orientation="Horizontal"
                                                    ItemWidth="220" 
                                                    HorizontalAlignment="Stretch" Cursor="">

                                <Button Content="🖼 Bild hinzufügen"
                                                        Click="BildAuswaehlen_Click"
                                                        Width="200" 
                                                        Style="{StaticResource DefaultButtonStyle}">
                                </Button>

                                <Button Width="200"
                                                        Command="{Binding AddOrSaveCommand}"
                                                        Style="{StaticResource PrimaryButtonStyle}">
                                    <Button.Content>

                                        <TextBlock Text="{Binding IstEditModus,
                                                             Converter={StaticResource EditModeToTextConverter}}"/>
                                    </Button.Content>
                                </Button>
                            </WrapPanel>

                            <!-- Mini Bild -->
                            <Image Source="{Binding NeuesBild, TargetNullValue={x:Null}}"

                                                   Margin="10,10,0,4"
                                                   Height="50"
                                                   HorizontalAlignment="Left"
                                                   Stretch="Uniform"/>

                        </StackPanel>

                    </GroupBox>
                </Grid>

            </ScrollViewer>

        </Border>

    </DockPanel>
</Window>


